
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Create A REST API with PHP And Symfony</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://quickstarts.postman.com/elements/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="G-GPC8QJXW1D"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="php-symfony-API"
                  title="Create A REST API with PHP And Symfony"
                  environment="web"
                  feedback-link="https://github.com/postmanlabs/pmquickstarts">
    
      <google-codelab-step label="Overview" duration="1">
        <p>PHP is the programming language behind major web applications like WordPress (blog), Drupal (<a href="https://en.wikipedia.org/wiki/Content_management_system" target="_blank">CMS</a>), and Magento (e-commerce). It first appeared in 1995, less than 3 weeks after the Java programming language.</p>
<p>It remains one of the top 10 programming languages in the world, according to many lists, and is the &#34;P&#34; in the famous LAMP stack (Linux, Apache, MySQL, and PHP).</p>
<p>In this tutorial, let&#39;s create a simple API using one of PHP&#39;s most popular frameworks, <a href="https://symfony.com/" target="_blank">Symfony</a>, and then access it with Postman.</p>
<h2 is-upgraded>Prerequisites</h2>
<ul>
<li>A basic familiarity with PHP.</li>
<li>Know how to use your operating system&#39;s built-in terminal.</li>
</ul>
<h2 class="checklist" is-upgraded>What You&#39;ll Learn</h2>
<ul class="checklist">
<li>How to create a simple PHP-based API with the <a href="https://symfony.com/" target="_blank">Symfony</a> framework.</li>
<li>How to create GET and POST API endpoints for it.</li>
<li>How to send requests to those endpoints with Postman.</li>
</ul>
<h2 is-upgraded>What You&#39;ll Need</h2>
<ul>
<li><a href="https://git-scm.com/downloads" target="_blank">Git</a> Installed (Required)</li>
<li><a href="https://www.php.net/manual/en/install.php" target="_blank">PHP</a> Installed (Required)</li>
<li><a href="https://getcomposer.org/download/" target="_blank">Composer</a> Installed (Required)</li>
<li><a href="https://symfony.com/download" target="_blank">Symfony CLI</a> Installed (Required)</li>
<li><a href="https://brew.sh/" target="_blank">Homebrew</a> Installed (Optional <strong>for Mac or x86-64 Linux</strong>)</li>
<li><a href="https://code.visualstudio.com/download" target="_blank">VSCode</a> Installed (Optional) <ul>
<li>Or a code editor of your choice</li>
</ul>
</li>
</ul>
<p><strong>You will not need Apache or Nginx for this guide as we&#39;ll use Symfony CLI&#39;s development server.</strong></p>
<h2 is-upgraded>What You&#39;ll Build</h2>
<ul>
<li>A simple API with PHP and Symfony</li>
</ul>
<p>Let&#39;s get started in the next step.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Installing The Prerequisites" duration="10">
        <h2 is-upgraded>Installing PHP</h2>
<p>The methods below install PHP with all the module dependencies for running Symfony locally. If you have already installed PHP locally, ensure you have the modules in the <a href="https://symfony.com/docs/7.x#server-requirements" target="_blank">Symfony server requirements</a> installed and enabled.</p>
<h3 is-upgraded>MacOS</h3>
<p>PHP is most easily installed with <a href="https://brew.sh" target="_blank">Homebrew</a>.</p>
<pre><code language="language-bash" class="language-bash">brew install php
</code></pre>
<p>After installation, confirm PHP is installed with <code>php -v</code> in the terminal.</p>
<h3 is-upgraded>Windows</h3>
<p>The PHP 8.2 version of <a href="https://www.apachefriends.org/download.html" target="_blank">XAMPP</a> installs a version of PHP with the necessary dependencies multiple PHP frameworks require. It will also install the Apache web server, MYSQL, and other software you don&#39;t necessarily need, but it isolates all of it in a unique directory so they&#39;re easy to remove.</p>
<ol type="1">
<li><a href="https://www.apachefriends.org/download.html" target="_blank">Download XAMPP</a> for your architecture. The version with PHP 8.2 (or later) is recommended.</li>
<li>Install it. It will warn against installing it to your regular program files location. That&#39;s fine. When it suggests <code>C:\xampp</code> as an installation directory, accept it.</li>
<li>Accept the default set of items being installed or deselect options you don&#39;t need (like Filezilla and Tomcat).</li>
<li>When it&#39;s complete, open a terminal/command window and issue the command: <code>setx PATH "%PATH%;C:\xampp\php"</code>. This adds your PHP executable to your path and makes it easy to call from the command line.</li>
<li>Close the terminal/command window and open a new one to start a session with the updated path information.</li>
<li>Test your installation by running <code>php -v</code> in the terminal and you should get some information on the version of PHP you installed.</li>
</ol>
<p>This was tested and worked with Windows 11 on both X86-64 and ARM architectures in March 2023.</p>
<h3 is-upgraded>Linux</h3>
<p>Using the default installation of PHP may create dependency issues when you try to start a Symfony project. We suggest the following:</p>
<ol type="1">
<li><a href="https://www.apachefriends.org/download.html" target="_blank">Download XAMPP</a> for your Linux distribution and Intel/AMD architecture. At the time of writing, XAMPP doesn&#39;t support Linux on ARM.</li>
<li>Follow the directions to install it for your Linux distribution.</li>
<li>By default on Ubuntu, it will install to the <code>/opt/lampp/</code> folder. Open the <code>~/.bashrc</code> file in your favorite text editor, add the following line to the end of the file, and save:</li>
</ol>
<pre><code language="language-bash" class="language-bash">EXPORT PATH=&#34;/opt/lampp/bin:$PATH&#34;
</code></pre>
<ol type="1" start="4">
<li>Open a new terminal for a session using the updated <code>.bashrc</code>. In that terminal try <code>php -v</code> to ensure it is installed and is in your path.</li>
</ol>
<p>This was tested and worked with Ubuntu 22.04 LTS in March 2023.</p>
<h2 is-upgraded>Installing Composer</h2>
<p>The <a href="https://getcomposer.org/doc/00-intro.md#system-requirements" target="_blank">Composer download and installation instructions</a> are a little dense. Let&#39;s simplify them.</p>
<h3 is-upgraded>MacOS</h3>
<p><a href="https://brew.sh" target="_blank">Homebrew</a> makes it simple.</p>
<pre><code language="language-bash" class="language-bash">brew install composer
</code></pre>
<p>If you don&#39;t have Homebrew, <a href="https://brew.sh" target="_blank">get Homebrew</a> or use the Linux instructions below.</p>
<h3 is-upgraded>Windows</h3>
<p>Use the <a href="https://getcomposer.org/doc/00-intro.md#installation-windows" target="_blank">Composer installer for Windows</a>. This will automatically put Composer in your path as well, so it will be accessible from the command line.</p>
<h3 is-upgraded>Linux</h3>
<p>Use the <a href="https://getcomposer.org/doc/00-intro.md#installation-linux-unix-macos" target="_blank">Composer installation instructions for Linux/Unix</a>.</p>
<p><strong>IMPORTANT</strong> follow the step on that page to move the installed copy into a directory that&#39;s already in your path so it&#39;s easy to call from the terminal.</p>
<h2 is-upgraded>Verifying Composer</h2>
<p>Open a new terminal or command prompt and type <code>composer -h</code>.</p>
<p class="image-container"><img alt="Composer help" src="img/5bb40bbd5ab2906.png"></p>
<p>If you get an error or nothing, check your installation.</p>
<p>Once this is complete, let&#39;s scaffold a Symfony project.</p>
<h2 is-upgraded>Installing Symfony CLI</h2>
<p>Symfony provides very simple and easy <a href="https://symfony.com/download" target="_blank">multi-platform installation instructions</a> for the <a href="https://symfony.com/download" target="_blank">Symfony Command Line Interface (CLI)</a>.</p>
<p>After you&#39;ve finished, run the following command in the terminal/command window on your system. It will not only verify you installed the CLI but that you&#39;ve got all the required pieces installed to run a Symfony application.</p>
<pre><code language="language-bash" class="language-bash">symfony check:req
</code></pre>
<p>You should get output that looks similar to this (the php.ini file path in the image is on a Mac).</p>
<p class="image-container"><img alt="Symfony check requirements output" src="img/a64ca1d1b64efb42.png"></p>
<p>Next, let&#39;s create our Symfony project.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Starting A Symfony Project" duration="3">
        <h2 is-upgraded>Scaffold your Symfony project</h2>
<p>Before we can write any code, we need to scaffold a <a href="https://symfony.com/" target="_blank">Symfony</a> project.</p>
<pre><code language="language-bash" class="language-bash">symfony new symfony_api
</code></pre>
<p>When it&#39;s finished, you will have a project folder named <code>symfony_api</code>.</p>
<p><strong>Note:</strong> This is the appropriate way to start an API project. Starting a web application project requires a little bit more. Refer to the <a href="https://symfony.com/doc/current/setup.html" target="_blank">Symfony setup instructions</a> for more information.</p>
<h2 is-upgraded>Give it a test</h2>
<p>Navigate into the <code>symfony_api</code> folder and enter the following command in the terminal:</p>
<pre><code language="language-bash" class="language-bash">symfony server:start --port=8080
</code></pre>
<p>This will launch your project at <code>http://localhost:8080</code>. Change the port to something else if you already have a process using the port. When it&#39;s running, visit the URL. It will return this homepage:</p>
<p class="image-container"><img alt="Your Symfony project&amp;rsquo;s default homepage" src="img/a800c625f0b3f47d.png"></p>
<p>Note the Symfony version number. If you&#39;re looking for tutorials, finding ones for Symfony that are as close to that version as possible will help minimize problems.</p>
<p>Let&#39;s move on to adding an API.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Build Your First Endpoint" duration="3">
        <h2 is-upgraded>Create the controller</h2>
<p>In Symfony, routes require a controller to handle the application logic, but you can create your route and controller in the same class. Let&#39;s create a simple &#34;Hello World&#34; controller.</p>
<p>In <code>symfony_api/src/Controller/</code> create a file called <code>HelloController.php</code>.</p>
<p>Add the following code:</p>
<pre><code language="language-php" class="language-php">&lt;?php
namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\Routing\Annotation\Route;
use Symfony\Component\HttpFoundation\Response;


class HelloController extends AbstractController
{
    //set the route, so [site URL]/hello will trigger this
    #[Route(&#39;/hello&#39;, name: &#39;hello_world&#39;)]
    public function hello(): Response
    {
      //create a new Response object
      $response = new Response();

      //set the return value
      $response-&gt;setContent(&#39;Hello World!&#39;);

      //make sure we send a 200 OK status
      $response-&gt;setStatusCode(Response::HTTP_OK);

      // set the response content type to plain text
      $response-&gt;headers-&gt;set(&#39;Content-Type&#39;, &#39;text/plain&#39;);

      // send the response with appropriate headers
      $response-&gt;send();
    }
}
</code></pre>
<p>Next, let&#39;s call this endpoint in Postman.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Try Your First Endpoint" duration="3">
        <p>To test this in Postman, open your personal workspace and start a collection. Name it <strong>Symfony QuickStart</strong> or something else you prefer.</p>
<p>Once it&#39;s created, select <strong>Add a request</strong> to get started.</p>
<p class="image-container"><img alt="Create a collection" src="img/40e4365c2ea71f24.png"></p>
<p>Set the request <strong>URL</strong> to <code>localhost:8080/hello</code> and make sure your Postman Desktop Agent app is running on your machine to prevent any CORS issues while testing locally.</p>
<p>Select <strong>Send</strong> and the response section below the request section will show a response of <code>Hello World!</code> in plain text with a <code>200 OK</code> response code.</p>
<p class="image-container"><img alt="localhost:8080/hello result" src="img/455fe9a76a9a53a5.png"></p>
<p>Congratulations. You created your first API endpoint in Symfony and successfully called it with Postman.</p>
<p>Next, let&#39;s make a simple POST endpoint for fun.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Add A POST Endpoint" duration="2">
        <p>In <code>symfony_api/src/Controller/</code> create a file called <code>ReverseController.php</code>. Put the following code in it:</p>
<pre><code language="language-php" class="language-php">&lt;?php
namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\Routing\Annotation\Route;
use Symfony\Component\HttpFoundation\Response;

// add request handling
use Symfony\Component\HttpFoundation\Request;

class ReverseController extends AbstractController
{
    //set the route, so [site URL]/hello will trigger this
    #[Route(&#39;/reverse&#39;, name: &#39;reverse_me&#39;)]
    public function reverse(): Response
    {
      //create a request object to get request data
      $request = Request::createFromGlobals();

      //create a new Response object
      $response = new Response();

      // make sure the reverse_this parameter exists and is a string
      if ($request-&gt;request-&gt;get(&#34;reverse_this&#34;) &amp;&amp; is_string($request-&gt;request-&gt;get(&#34;reverse_this&#34;))) {

        //reverse the string and add it to the response
        $response-&gt;setContent(strrev($request-&gt;request-&gt;get(&#34;reverse_this&#34;)));

        //make sure we send a 200 OK status
        $response-&gt;setStatusCode(Response::HTTP_OK);

      } else {

        //provide useful error message
        $response-&gt;setContent(&#34;The /reverse endpoint requires a POST with a &#39;reverse_this&#39; parameter containing a text string.&#34;);

        //make sure we send an error status
        $response-&gt;setStatusCode(Response::HTTP_BAD_REQUEST);

      }

      // set the response content type to plain text
      $response-&gt;headers-&gt;set(&#39;Content-Type&#39;, &#39;text/plain&#39;);

      // send the response
      $response-&gt;send();
    }
}
</code></pre>
<p>This adds a POST route for the endpoint <code>/reverse</code>. It will reverse a string you pass in the body of the post with the parameter name <code>reverse_this</code>. It will also make sure the request is a POST and has a <code>reverse_this</code> parameter with a string as its value.</p>
<p>Let&#39;s try calling this in Postman.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Try Your POST Endpoint" duration="4">
        <p>Return to your <strong>Symfony QuickStart</strong> collection in Postman and <strong>add a request</strong>. Name it &#34;Reverse&#34; and follow these steps:</p>
<ul>
<li>Set the request type to <strong>POST</strong>.</li>
<li>Set the endpoint to <code>localhost:8080/reverse</code>.</li>
<li>Select the <strong>Body</strong> tab.</li>
<li>In the top dropdown menu in the tab, select <strong>x-www-form-urlencoded</strong>.</li>
<li>Add a parameter of <code>reverse_this</code> with the value of <code>esrever</code>. That&#39;s &#34;reverse&#34; already reversed so the return value will be easy to read.</li>
<li>Select <strong>Send</strong></li>
</ul>
<p class="image-container"><img alt="Post request and result" src="img/82060fa83cf912cf.png"></p>
<p>The API will return the string <code>reverse</code> in plain text with a <code>200 0K</code> status.</p>
<p>Next try changing the parameter name to anything other than <code>reverse_this</code>, like <code>bad_rev</code> and select <strong>Send</strong>.</p>
<p>The API will return an error message with a <code>400 Bad Request</code> status.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Next Steps" duration="0">
        <p>Congratulations on creating an API in Symfony and accessing it with Postman.</p>
<p>You can deepen your knowledge of Symfony or Postman by trying the following.</p>
<ul>
<li>Dive into the <a href="https://symfony.com/doc/current/index.html" target="_blank">current Symfony documentation</a> to add controllers for handling more complex requests and/or add a model to connect a database.</li>
<li>Explore the <a href="https://learning.postman.com/docs/writing-scripts/test-scripts/" target="_blank">Postman testing documentation</a> and write a test on the POST request to make sure the <code>reverse_this</code> string is being reversed properly.</li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://quickstarts.postman.com/elements/codelab-elements/native-shim.js"></script>
  <script src="https://quickstarts.postman.com/elements/codelab-elements/custom-elements.min.js"></script>
  <script src="https://quickstarts.postman.com/elements/codelab-elements/prettify.js"></script>
  <script src="https://quickstarts.postman.com/elements/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>
  <script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
    heap.load("2025084205");
  </script>
</body>
</html>
