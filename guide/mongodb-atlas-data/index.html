
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Get Started with the MongoDB Atlas Data API</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://quickstarts.postman.com/elements/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="G-GPC8QJXW1D"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="mongodb-atlas-data"
                  title="Get Started with the MongoDB Atlas Data API"
                  environment="web"
                  feedback-link="https://github.com/postmanlabs/pmquickstarts">
    
      <google-codelab-step label="Overview" duration="1">
        <aside class="warning"><p><em>This tutorial was originally published </em><a href="https://www.mongodb.com/developer/products/atlas/data-api-postman/" target="_blank"><em>here</em></a><em>.</em></p>
</aside>
<p>MongoDB&#39;s<a href="https://www.mongodb.com/data-api/lp" target="_blank">Data API</a> is a way to access your MongoDB Atlas data using a REST-like interface. When enabled, the API creates a series of serverless endpoints that can be accessed without using <a href="https://docs.mongodb.com/drivers/" target="_blank">native drivers</a>. This API can be helpful when you need to access your data from an application that doesn&#39;t use those drivers, such as a bash script, a Google Sheet document, or even another database.</p>
<p>To explore the new MongoDB Data API, you can use the <a href="https://www.postman.com/mongodb-devrel/workspace/mongodb-public/documentation/17898583-25682080-e247-4d25-8e5c-1798461c7db4" target="_blank">public Postman workspace</a> provided by the MongoDB developer relations team.</p>
<p>In this article, we will show you how to use Postman to read and write to your MongoDB Atlas cluster. You will need to set up your Altas cluster and fork the Postman collection to start using it.</p>
<h2 is-upgraded>Prerequisites</h2>
<ul>
<li>Set up an Atlas cluster</li>
<li><a href="https://identity.getpostman.com/signup" target="_blank">Sign up</a> for a free Postman account, and then <a href="https://go.postman.co/" target="_blank">sign in</a>.</li>
<li><a href="https://www.postman.com/downloads/postman-agent/" target="_blank">Download and install</a> the Postman desktop agent, which will enable you to use the web version of Postman</li>
</ul>
<h2 class="checklist" is-upgraded>What You&#39;ll Learn</h2>
<ul class="checklist">
<li>Authorize the MongoDB Data API</li>
<li>Insert, Find, Update, and Delete a document</li>
<li>Perform operations on multiple documents</li>
</ul>
<h2 is-upgraded>What You&#39;ll Build</h2>
<ul>
<li>A Postman Collection with authorized API requests</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Set up your MongoDB Atlas cluster" duration="4">
        <h2 is-upgraded>Set up your MongoDB Atlas cluster</h2>
<p>The first step to using the Data API is to create your own MongoDB Atlas cluster. If you don&#39;t have a cluster available already, you can <a href="https://www.mongodb.com/cloud/atlas/register" target="_blank">get one for free</a>. Follow the instructions from the <a href="https://docs.atlas.mongodb.com/tutorial/deploy-free-tier-cluster/" target="_blank">documentation</a> for the detailed directions on setting up your MongoDB Atlas instance.</p>
<h2 is-upgraded>Enable the Data API</h2>
<p>Enabling the Data API on your MongoDB Atlas data collections is done with a few clicks. Once you have a cluster up and running, you can enable the Data API by following <a href="https://docs.atlas.mongodb.com/api/data-api/#1.-enable-the-data-api" target="_blank">these instructions</a>.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Fork the Postman collection" duration="1">
        <p>You can use the button below to open the fork in your Postman workspace or follow the instructions provided in this section.</p>
<p><a href="https://god.gw.postman.com/run-collection/17898583-25682080-e247-4d25-8e5c-1798461c7db4?action=collection%2Ffork&collection-url=entityId%3D17898583-25682080-e247-4d25-8e5c-1798461c7db4%26entityType%3Dcollection%26workspaceId%3D8355a86e-dec2-425c-9db0-cb5e0c3cec02" target="_blank"><img alt="Fork the MongoDB collection" src="img/512b3ab5f8f0d855.svg"></a></p>
<p>From the <a href="https://www.postman.com/mongodb-devrel/workspace/mongodb-public/overview" target="_blank">public MongoDB workspace</a> on Postman, you will find two collections. The second one from the list, the <em>MongoDB Data API</em>, is the one you are interested in. Click on the three dots next to the collection name and select <em>Create a fork</em> from the popup menu.</p>
<p class="image-container"><img alt="Fork the collection" src="img/9ccbd125b70a7524.webp"></p>
<p>Then follow the instructions on the screen to add this collection to your workspace. By forking this collection, you will be able to pull the changes from the official collection as the API evolves.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Fill in the required variables" duration="2">
        <p>You will now need to configure your Postman collections to be ready to use your MongoDB collection. Start by opening the <em>Variables</em> tab in the Postman collection.</p>
<p class="image-container"><img alt="add collection variables" src="img/8fee911c143dc78f.webp"></p>
<p>You will need to fill in the values for each variable. If you don&#39;t want the variables to be saved in your collection, use the <em>Current value</em> column. If you&#39;re going to reuse those same values next time you log in, use the <em>Initial value</em> column.</p>
<p>For the <code>URL_ENDPOINT</code> variable, go to the Data API screen on your Atlas cluster. The URL endpoint should be right there at the top. Click on the <em>Copy</em> button and paste the value in Postman.</p>
<p class="image-container"><img alt="URL_ENDPOINT value" src="img/31ec139cf65fe7ab.webp"></p>
<p>Next, for the <code>API_KEY</code>, click on <em>Create API Key</em>. This will open up a modal window. Give your key a unique name and click on <em>Generate Key</em>. Again, click on the <em>Copy</em> button and paste it into Postman.</p>
<p class="image-container"><img alt="API_KEY value" src="img/bc56298061c81622.webp"></p>
<p>Now fill in the <code>CLUSTER_NAME</code> with the name of your cluster. If you&#39;ve used the default values when creating the cluster, it should be <em>Cluster0</em>. For <code>DATABASE</code> and <code>COLLECTION</code>, you can use an existing database if you have one ready. If the database and collection you specify do not exist, they will be created upon inserting the first document.</p>
<p>Once you&#39;ve filled in those variables, click on <em>Save</em> to persist your data in Postman.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Using the Data API" duration="5">
        <p>You are now ready to use the Data API from your Postman collection.</p>
<h2 is-upgraded>Insert a document</h2>
<p>Start with the first request in the collection, the one called &#34;Insert Document.&#34;</p>
<p>Start by selecting the request from the left menu. If you click on the <em>Body</em> tab, you will see what will be sent to the Data API.</p>
<pre><code language="language-json" class="language-json">{
  &#34;dataSource&#34;: &#34;&#123;&#123;CLUSTER_NAME}}&#34;,
  &#34;database&#34;: &#34;&#123;&#123;DATABASE}}&#34;,
  &#34;collection&#34;: &#34;&#123;&#123;COLLECTION}}&#34;,
  &#34;document&#34;: {
    &#34;name&#34;: &#34;John Sample&#34;,
    &#34;age&#34;: 42
  }
}
</code></pre>
<p>Here, you can see that we are using the workspace variables for the cluster, database, and collection names. The <code>document</code> property contains the document we want to insert into the collection.</p>
<p>Now hit the blue <em>Send</em> button to trigger the request. In the bottom part of the screen, you will see the response from the server. You should see something similar to:</p>
<pre><code language="language-json" class="language-json">{ &#34;insertedId&#34;: &#34;61e07acf63093e54f3c6098c&#34; }
</code></pre>
<p>This <code>insertedId</code> is the <em>id</em> value of the newly created document. If you go to the Atlas UI, you will see the newly created document in the collection in the data explorer. Since you already have access to the Data API, why not use the API to see the inserted value?</p>
<h2 is-upgraded>Find a document</h2>
<p>Select the following request in the list, the one called &#34;Find Document.&#34; Again, you can look at the body of the request by selecting the matching tab. In addition to the cluster, database, and collection names, you will see a <code>filter</code> property.</p>
<pre><code language="language-json" class="language-json">{
  &#34;dataSource&#34;: &#34;&#123;&#123;CLUSTER_NAME}}&#34;,
  &#34;database&#34;: &#34;&#123;&#123;DATABASE}}&#34;,
  &#34;collection&#34;: &#34;&#123;&#123;COLLECTION}}&#34;,
  &#34;filter&#34;: { &#34;name&#34;: &#34;John Sample&#34; }
}
</code></pre>
<p>The filter is the criteria that will be used for the query. In this case, you are searching for a person named &#34;John Sample.&#34;</p>
<p>Click the Send button again to trigger the request. This time, you should see the document itself.</p>
<pre><code language="language-json" class="language-json">{
  &#34;document&#34;: {
    &#34;_id&#34;: &#34;61e07acf63093e54f3c6098c&#34;,
    &#34;name&#34;: &#34;John Sample&#34;,
    &#34;age&#34;: 42
  }
}
</code></pre>
<p>You can use any <a href="https://docs.mongodb.com/manual/reference/operator/query/" target="_blank">MongoDB query operators</a> to filter the records you want. For example, if you wanted the first document for a person older than 40, you could use the $gt operator.</p>
<pre><code language="language-json" class="language-json">{
  &#34;dataSource&#34;: &#34;&#123;&#123;CLUSTER_NAME}}&#34;,
  &#34;database&#34;: &#34;&#123;&#123;DATABASE}}&#34;,
  &#34;collection&#34;: &#34;&#123;&#123;COLLECTION}}&#34;,
  &#34;filter&#34;: { &#34;age&#34;: { &#34;$gt&#34;: 40 } }
}
</code></pre>
<p>This last query should return you the same document again.</p>
<h2 is-upgraded>Update a document</h2>
<p>Say you made a typo when you entered John&#39;s information. He is not 42 years old, but rather 24. You can use the Data API to perform an update. Select the &#34;Update Document&#34; request from the list on the left, and click on the <em>Body</em> tab. You will see the body for an update request.</p>
<pre><code language="language-json" class="language-json">{
  &#34;dataSource&#34;: &#34;&#123;&#123;CLUSTER_NAME}}&#34;,
  &#34;database&#34;: &#34;&#123;&#123;DATABASE}}&#34;,
  &#34;collection&#34;: &#34;&#123;&#123;COLLECTION}}&#34;,
  &#34;filter&#34;: { &#34;name&#34;: &#34;John Sample&#34; },
  &#34;update&#34;: { &#34;$set&#34;: { &#34;age&#34;: 24 } }
}
</code></pre>
<p>In this case, you can see a <code>filter</code> to find a document for a person with the name John Sample. The <code>update</code> field specifies what to update. You can use any <a href="https://docs.mongodb.com/manual/reference/operator/update-field/" target="_blank">update operator</a> here. We&#39;ve used <code>$set</code> for this specific example to change the value of the age field to <code>24</code>. Running this query should give you the following result.</p>
<pre><code language="language-json" class="language-json">{ &#34;matchedCount&#34;: 1, &#34;modifiedCount&#34;: 1 }
</code></pre>
<p>This response tells us that the operation succeeded and that one document has been modified. If you go back to the &#34;Find Document&#34; request and run it for a person older than 40 again, this time, you should get the following response.</p>
<pre><code language="language-json" class="language-json">{ &#34;document&#34;: null }
</code></pre>
<p>The <code>null</code> value is returned because no items match the criteria passed in the <code>filter</code> field.</p>
<h2 is-upgraded>Delete a document</h2>
<p>The process to delete a document is very similar. Select the &#34;Delete Document&#34; request from the left navigation bar, and click on the <em>Body</em> tab to see the request&#39;s body.</p>
<pre><code language="language-json" class="language-json">{
  &#34;dataSource&#34;: &#34;&#123;&#123;CLUSTER_NAME}}&#34;,
  &#34;database&#34;: &#34;&#123;&#123;DATABASE}}&#34;,
  &#34;collection&#34;: &#34;&#123;&#123;COLLECTION}}&#34;,
  &#34;filter&#34;: { &#34;name&#34;: &#34;John Sample&#34; }
}
</code></pre>
<p>Just as in the &#34;Find Document&#34; endpoint, there is a filter field to select the document to delete. If you click on Send, this request will delete the person with the name &#34;John Sample&#34; from the collection. The response from the server is:</p>
<pre><code language="language-json" class="language-json">{ &#34;deletedCount&#34;: 1 }
</code></pre>
<p>So you can see how many matching records were deleted from the database.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Operations on multiple documents" duration="3">
        <p>So far, we have done each operation on single documents. The endpoints <code>/insertOne</code>, <code>/findOne</code>, <code>/updateOne</code>, and <code>/deleteOne</code> were used for that purpose. Each endpoint has a matching endpoint to perform operations on multiple documents in your collection. You can find examples, along with the usage instructions for each endpoint, in the Postman collection.</p>
<p>Some of those endpoints can be very helpful. The <code>/find</code> endpoint can return all the documents in a collection, which can be helpful for importing data into another database. You can also use the <code>/insertMany</code> endpoint to import large chunks of data into your collections.</p>
<p>However, use extreme care with <code>/updateMany</code> and <code>/deleteMany</code> since a small error could potentially destroy all the data in your collection.</p>
<h2 is-upgraded>Aggregation Pipelines</h2>
<p>One of the most powerful features of MongoDB is the ability to create <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline/" target="_blank">aggregation pipelines</a>. These pipelines let you create complex queries using an array of JSON objects. You can also perform those queries on your collection with the Data API.</p>
<p>In the left menu, pick the &#34;Run Aggregation Pipeline&#34; item. You can use this request for running those pipelines. In the <em>Body</em> tab, you should see the following JSON object.</p>
<pre><code language="language-json" class="language-json">{
  &#34;dataSource&#34;: &#34;&#123;&#123;CLUSTER_NAME}}&#34;,
  &#34;database&#34;: &#34;&#123;&#123;DATABASE}}&#34;,
  &#34;collection&#34;: &#34;&#123;&#123;COLLECTION}}&#34;,
  &#34;pipeline&#34;: [
    {
      &#34;$sort&#34;: { &#34;age&#34;: 1 }
    },
    {
      &#34;$limit&#34;: 1
    }
  ]
}
</code></pre>
<p>Here, we have a pipeline that will take all of the objects in the collection, sort them by ascending age using the <code>$sort</code> stage, and only return the first return using the <code>$limit</code> stage. This pipeline will return the youngest person in the collection.</p>
<p>If you want to test it out, you can first run the &#34;Insert Multiple Documents&#34; request to populate the collection with multiple records.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Next Steps" duration="1">
        <p>There you have it! A fast and easy way to test out the Data API or explore your MongoDB Atlas data using Postman. If you want to learn more about the Data API, check out the <a href="https://www.mongodb.com/developer/quickstart/atlas_data_api_introduction/" target="_blank">Atlas Data API Introduction</a> blog post. If you are more interested in automating operations on your Atlas cluster, there is another API called the Management API. You can learn more about the latter on the <a href="https://www.mongodb.com/developer/article/automate-automation-mongodb-atlas/" target="_blank">Automate Automation on MongoDB Atlas</a> blog post.</p>
<p>This tutorial discusses the preview version of the Atlas Data API which is now generally available with more features and functionality. Learn more about the GA version <a href="https://www.mongodb.com/developer/products/atlas/atlas-data-api-introduction/" target="_blank">here</a>.</p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://quickstarts.postman.com/elements/codelab-elements/native-shim.js"></script>
  <script src="https://quickstarts.postman.com/elements/codelab-elements/custom-elements.min.js"></script>
  <script src="https://quickstarts.postman.com/elements/codelab-elements/prettify.js"></script>
  <script src="https://quickstarts.postman.com/elements/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>
  <script type="text/javascript">
    window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
    heap.load("2025084205");
  </script>
</body>
</html>
